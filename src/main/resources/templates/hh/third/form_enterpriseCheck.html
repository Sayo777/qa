<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link th:href="@{/hh/css/bootstrap.min.css?v=3.3.6}" rel="stylesheet">
    <link th:href="@{/hh/css/font-awesome.css?v=4.4.0}" rel="stylesheet">
    <link th:href="@{/hh/css/plugins/iCheck/custom.css}" rel="stylesheet">
    <link th:href="@{/hh/css/animate.css}" rel="stylesheet">
    <link th:href="@{/hh/css/style.css?v=4.1.0}" rel="stylesheet">

</head>

<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
    <div class="row" >
        <div class="col-sm-12">
            <div class="ibox float-e-margins" >
                <div class="ibox-title">
                    <h5>申请认证检测机构信息</h5>

                </div>
                <div class="ibox-content">
                    <form class="form-horizontal" name="myForm" id="myForm" th:action="@{/3User/eApply}" method="post" >
                        <div class="form-group">
                            <label class="col-sm-3 control-label">机构名称：</label>
                            <div class="col-sm-3">
                                <input type="text" class="form-control" id="thirdName" name="thirdName" required="">
                            </div>
                            <label class="col-sm-2 control-label">法定代表人：</label>

                            <div class="col-sm-3">
                                <input type="text" class="form-control" id="legalPerson" name="legalPerson" required="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">工商注册号：</label>
                            <div class="col-sm-3">
                                <input type="text" class="form-control" id="commercialNumber" name="commercialNumber" required="">
                            </div>
                            <label class="col-sm-2 control-label">信用代码：</label>
                            <div class="col-sm-3">
                                <input type="text" class="form-control" id="creditCode" name="creditCode" required="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">机构类型：</label>
                            <div class="col-sm-4">
                                <input type="radio" name="type" id="neizi" value="内资企业"
                                       style="margin-left: 10px"> 内资企业
                                <input type="radio" name="type" id="gangao" value="港澳台投资企业"  style="margin-left: 30px"> 港澳台投资企业

                                <input type="radio" name="type" id="waizi" value="外资企业"  style="margin-left: 30px"> 外资企业

                            </div>

                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">经营状态：</label>
                            <div class="col-sm-3">
                                <input type="text" class="form-control" id="status" name="status" required="">
                            </div>
                            <label class="col-sm-2 control-label">组织机构代码：</label>

                            <div class="col-sm-3">
                                <input type="text" class="form-control" id="organCode" name="organCode" required="">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-3 control-label">机构邮箱：</label>
                            <div class="col-sm-3">
                                <input type="email" class="form-control" id="thirdEmail" name="thirdEmail" required="">
                            </div>
                            <label class="col-sm-2 control-label">联系人：</label>

                            <div class="col-sm-3">
                                <input type="text" class="form-control" id="contactPerson" name="contactPerson" required="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">联系电话：</label>
                            <div class="col-sm-3">
                                <input  class="form-control" id="tel" name="tel" required="">
                            </div>
                            <label class="col-sm-2 control-label">经营范围：</label>
                            <div class="col-sm-3">
                                <input type="text" class="form-control" id="scope" name="scope" required="">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-3 control-label">企业审核日期：</label>
                            <div class="col-sm-3">
                                <input id="hello" name="auditDate"  class="laydate-icon form-control layer-date" required="">
                            </div>

                        </div>

                        <div class="form-group">
                            <label class="col-sm-3 control-label">详细地址：</label>
                            <select class="form-control m-b" name="s_province" id="s_province"
                                    style="width: 104px;float: left;margin-left: 15px" required=""></select>
                            <select class="form-control m-b" name="s_city" id="s_city"
                                    style="width: 146px;float: left;margin-left: 10px" required=""></select>
                            <select class="form-control m-b" name="s_county" id="s_county"
                                    style="width: 169px ;margin-left: 559px;" required=""></select>
                            <script class="resources library" th:src="@{/hh/js/area.js}"
                                    type="text/javascript"></script>
                            <script type="text/javascript">_init_area();</script>
                            <div class="col-sm-3">
                                <input type="text" class="form-control" style="width: 440px;margin-left: 273px"
                                       id="address" name="address" required="">
                            </div>
                            <div id="show"></div>
                        </div>



                        <div class="form-group">
                            <div class="col-sm-offset-3 col-sm-8">
                                <button class="btn btn-primary" type="submit" >提交审核</button>
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>


</div>


<!-- 全局js -->
<script th:src="@{/hh/js/jquery.min.js?v=2.1.4}"></script>
<script th:src="@{/hh/js/bootstrap.min.js?v=3.3.6}"></script>

<!-- 自定义js -->
<script th:src="@{/hh/js/content.js?v=1.0.0}"></script>
<script th:src="@{/hh/js/enterpriseCheck.js}"></script>

<!-- iCheck -->
<script th:src="@{/hh/js/plugins/iCheck/icheck.min.js}"></script>
<script>
    $(document).ready(function () {
        $('input:not([autocomplete]),textarea:not([autocomplete]),select:not([autocomplete])').attr('autocomplete', 'off');
        $('.i-checks').iCheck({
            checkboxClass: 'icheckbox_square-green',
            radioClass: 'iradio_square-green',
        });
    });
</script>
<script type="text/javascript">

    var Gid = document.getElementById;

    var showArea = function () {

        Gid('show').innerHTML = "<h3>省" + Gid('s_province').value + " - 市" +

            Gid('s_city').value + " - 县/区" +

            Gid('s_county').value + "</h3>"

    }

    Gid('s_county').setAttribute('onchange', 'showArea()');

</script>
<!-- layerDate plugin javascript -->
<script th:src="@{/hh/js/plugins/layer/laydate/laydate.js}"></script>
<script>
    //外部js调用
    laydate({
        elem: '#hello', //目标元素。由于laydate.js封装了一个轻量级的选择器引擎，因此elem还允许你传入class、tag但必须按照这种方式 '#id .class'
        event: 'focus' //响应事件。如果没有传入event，则按照默认的click
    });

    //日期范围限制
    var start = {
        elem: '#start',
        format: 'YYYY/MM/DD hh:mm:ss',
        min: laydate.now(), //设定最小日期为当前日期
        max: '2099-06-16 23:59:59', //最大日期
        istime: true,
        istoday: false,
        choose: function (datas) {
            end.min = datas; //开始日选好后，重置结束日的最小日期
            end.start = datas //将结束日的初始值设定为开始日
        }
    };
    var end = {
        elem: '#end',
        format: 'YYYY/MM/DD hh:mm:ss',
        min: laydate.now(),
        max: '2099-06-16 23:59:59',
        istime: true,
        istoday: false,
        choose: function (datas) {
            start.max = datas; //结束日选好后，重置开始日的最大日期
        }
    };
    laydate(start);
    laydate(end);
</script>
<script>
    function handle(file) {
        $.ajax({
            url: "http://upload-z0.qiniup.com",
            method: "post",
            processData: false,
            contentType: false,
            data: new FormData($("#myForm")[0]),
            success: function(data) {
                if(data && data.code == 0) {
                } else {
                    alert("fail");
                }
            }
        });
        var MAXWIDTH = 260;
        var MAXHEIGHT = 180;
        var div = document.getElementById('preview');
        if (file.files && file.files[0]) {
            var img = document.getElementById('license');
            img.onload = function () {
                var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
                img.width = rect.width;
                img.height = rect.height;
                img.style.marginTop = rect.top + 'px';
            }
            var reader = new FileReader();
            reader.onload = function (evt) {
                img.src = evt.target.result;
            }
            reader.readAsDataURL(file.files[0]);
        }
    }

    function clacImgZoomParam(maxWidth, maxHeight, width, height) {
        var param = {top: 0, left: 0, width: width, height: height};
        if (width > maxWidth || height > maxHeight) {
            rateWidth = width / maxWidth;
            rateHeight = height / maxHeight;

            if (rateWidth > rateHeight) {
                param.width = maxWidth;
                param.height = Math.round(height / rateWidth);
            } else {
                param.width = Math.round(width / rateHeight);
                param.height = maxHeight;
            }
        }

        param.left = Math.round((maxWidth - param.width) / 2);
        param.top = Math.round((maxHeight - param.height) / 2);
        return param;
    }
</script>

</body>

</html>
